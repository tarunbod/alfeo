!function(e){function t(){return"Markdown.mk_block( "+uneval(this.toString())+", "+uneval(this.trailing)+", "+uneval(this.lineNumber)+" )"}function n(){var e=require("util");return"Markdown.mk_block( "+e.inspect(this.toString())+", "+e.inspect(this.trailing)+", "+e.inspect(this.lineNumber)+" )"}function l(e){for(var r=0,t=-1;-1!==(t=e.indexOf("\n",t+1));)r++;return r}function o(e,r){function a(e){this.len_after=e,this.name="close_"+r}var t=e+"_state",n="strong"==e?"em_state":"strong_state";return function(i){if(this[t][0]==r)return this[t].shift(),[i.length,new a(i.length-r.length)];var o=this[n].slice(),s=this[t].slice();this[t].unshift(r);{var u=this.processInline(i.substr(r.length)),h=u[u.length-1];this[t].shift()}if(h instanceof a){u.pop();var f=i.length-h.len_after;return[f,[e].concat(u)]}return this[n]=o,this[t]=s,[r.length,r]}}function s(e){for(var r=e.split(""),t=[""],n=!1;r.length;){var a=r.shift();switch(a){case" ":n?t[t.length-1]+=a:t.push("");break;case"'":case'"':n=!n;break;case"\\":a=r.shift();default:t[t.length-1]+=a}}return t}function f(e){return u(e)&&e.length>1&&"object"==typeof e[1]&&!u(e[1])?e[1]:void 0}function d(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function g(e){if("string"==typeof e)return d(e);var r=e.shift(),t={},n=[];for(!e.length||"object"!=typeof e[0]||e[0]instanceof Array||(t=e.shift());e.length;)n.push(g(e.shift()));var a="";for(var i in t)a+=" "+i+'="'+d(t[i])+'"';return"img"==r||"br"==r||"hr"==r?"<"+r+a+"/>":"<"+r+a+">"+n.join("")+"</"+r+">"}function v(e,r,t){var n;t=t||{};var a=e.slice(0);"function"==typeof t.preprocessTreeNode&&(a=t.preprocessTreeNode(a,r));var i=f(a);if(i){a[1]={};for(n in i)a[1][n]=i[n];i=a[1]}if("string"==typeof a)return a;switch(a[0]){case"header":a[0]="h"+a[1].level,delete a[1].level;break;case"bulletlist":a[0]="ul";break;case"numberlist":a[0]="ol";break;case"listitem":a[0]="li";break;case"para":a[0]="p";break;case"markdown":a[0]="html",i&&delete i.references;break;case"code_block":a[0]="pre",n=i?2:1;var l=["code"];l.push.apply(l,a.splice(n,a.length-n)),a[n]=l;break;case"inlinecode":a[0]="code";break;case"img":a[1].src=a[1].href,delete a[1].href;break;case"linebreak":a[0]="br";break;case"link":a[0]="a";break;case"link_ref":a[0]="a";var o=r[i.ref];if(!o)return i.original;delete i.ref,i.href=o.href,o.title&&(i.title=o.title),delete i.original;break;case"img_ref":a[0]="img";var o=r[i.ref];if(!o)return i.original;delete i.ref,i.src=o.href,o.title&&(i.title=o.title),delete i.original}if(n=1,i){for(var s in a[1]){n=2;break}1===n&&a.splice(n,1)}for(;n<a.length;++n)a[n]=v(a[n],r,t);return a}function m(e){for(var r=f(e)?2:1;r<e.length;)"string"==typeof e[r]?r+1<e.length&&"string"==typeof e[r+1]?e[r]+=e.splice(r+1,1)[0]:++r:(m(e[r]),++r)}var r=e.Markdown=function(e){switch(typeof e){case"undefined":this.dialect=r.dialects.Gruber;break;case"object":this.dialect=e;break;default:if(!(e in r.dialects))throw new Error("Unknown Markdown dialect '"+String(e)+"'");this.dialect=r.dialects[e]}this.em_state=[],this.strong_state=[],this.debug_indent=""};e.parse=function(e,t){var n=new r(t);return n.toTree(e)},e.toHTML=function(r,t,n){var a=e.toHTMLTree(r,t,n);return e.renderJsonML(a)},e.toHTMLTree=function(e,r,t){"string"==typeof e&&(e=this.parse(e,r));var n=f(e),a={};n&&n.references&&(a=n.references);var i=v(e,a,t);return m(i),i};var i=r.mk_block=function(e,r,a){1==arguments.length&&(r="\n\n");var i=new String(e);return i.trailing=r,i.inspect=n,i.toSource=t,void 0!=a&&(i.lineNumber=a),i};r.prototype.split_blocks=function(e){e=e.replace(/(\r\n|\n|\r)/g,"\n");var a,t=/([\s\S]+?)($|\n#|\n(?:\s*\n|$)+)/g,n=[],o=1;for(null!=(a=/^(\s*\n)/.exec(e))&&(o+=l(a[0]),t.lastIndex=a[0].length);null!==(a=t.exec(e));)"\n#"==a[2]&&(a[2]="\n",t.lastIndex--),n.push(i(a[1],a[2],o)),o+=l(a[0]);return n},r.prototype.processBlock=function(e,r){var t=this.dialect.block,n=t.__order__;if("__call__"in t)return t.__call__.call(this,e,r);for(var a=0;a<n.length;a++){var i=t[n[a]].call(this,e,r);if(i)return(!u(i)||i.length>0&&!u(i[0]))&&this.debug(n[a],"didn't return a proper array"),i}return[]},r.prototype.processInline=function(e){return this.dialect.inline.__call__.call(this,String(e))},r.prototype.toTree=function(e,r){var t=e instanceof Array?e:this.split_blocks(e),n=this.tree;try{for(this.tree=r||this.tree||["markdown"];t.length;){var a=this.processBlock(t.shift(),t);a.length&&this.tree.push.apply(this.tree,a)}return this.tree}finally{r&&(this.tree=n)}},r.prototype.debug=function(){var e=Array.prototype.slice.call(arguments);e.unshift(this.debug_indent),"undefined"!=typeof print&&print.apply(print,e),"undefined"!=typeof console&&"undefined"!=typeof console.log&&console.log.apply(null,e)},r.prototype.loop_re_over_block=function(e,r,t){for(var n,a=r.valueOf();a.length&&null!=(n=e.exec(a));)a=a.substr(n[0].length),t.call(this,n);return a},r.dialects={},r.dialects.Gruber={block:{atxHeader:function(e,r){var t=e.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(!t)return void 0;var n=["header",{level:t[1].length}];return Array.prototype.push.apply(n,this.processInline(t[2])),t[0].length<e.length&&r.unshift(i(e.substr(t[0].length),e.trailing,e.lineNumber+2)),[n]},setextHeader:function(e,r){var t=e.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(!t)return void 0;var n="="===t[2]?1:2,a=["header",{level:n},t[1]];return t[0].length<e.length&&r.unshift(i(e.substr(t[0].length),e.trailing,e.lineNumber+2)),[a]},code:function(e,r){var t=[],n=/^(?: {0,3}\t| {4})(.*)\n?/;if(!e.match(n))return void 0;e:for(;;){var l=this.loop_re_over_block(n,e.valueOf(),function(e){t.push(e[1])});if(l.length){r.unshift(i(l,e.trailing));break e}if(!r.length)break e;if(!r[0].match(n))break e;t.push(e.trailing.replace(/[^\n]/g,"").substring(2)),e=r.shift()}return[["code_block",t.join("\n")]]},horizRule:function(e,r){var t=e.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(!t)return void 0;var n=[["hr"]];return t[1]&&n.unshift.apply(n,this.processBlock(t[1],[])),t[3]&&r.unshift(i(t[3])),n},lists:function(){function l(r){return new RegExp("(?:^("+a+"{0,"+r+"} {0,3})("+e+")\\s+)|(^"+a+"{0,"+(r-1)+"}[ ]{0,4})")}function o(e){return e.replace(/ {0,3}\t/g,"    ")}function s(e,r,t,n){if(r)return void e.push(["para"].concat(t));var a=e[e.length-1]instanceof Array&&"para"==e[e.length-1][0]?e[e.length-1]:e;n&&e.length>1&&t.unshift(n);for(var i=0;i<t.length;i++){var l=t[i],o="string"==typeof l;o&&a.length>1&&"string"==typeof a[a.length-1]?a[a.length-1]+=l:a.push(l)}}function u(e,r){for(var t=new RegExp("^("+a+"{"+e+"}.*?\\n?)*$"),n=new RegExp("^"+a+"{"+e+"}","gm"),l=[];r.length>0&&t.exec(r[0]);){var o=r.shift(),s=o.replace(n,"");l.push(i(s,o.trailing,o.lineNumber))}return l}function c(e,r,t){var n=e.list,a=n[n.length-1];if(!(a[1]instanceof Array&&"para"==a[1][0]))if(r+1==t.length)a.push(["para"].concat(a.splice(1,a.length-1)));else{var i=a.pop();a.push(["para"].concat(a.splice(1,a.length-1)),i)}}var e="[*+-]|\\d+\\.",r=/[*+-]/,n=new RegExp("^( {0,3})("+e+")[ 	]+"),a="(?: {0,3}\\t| {4})";return function(e,t){function i(e){var t=r.exec(e[2])?["bulletlist"]:["numberlist"];return f.push({list:t,indent:e[1]}),t}var a=e.match(n);if(!a)return void 0;for(var d,m,f=[],p=i(a),g=!1,v=[f[0].list];;){for(var w=e.split(/(?=\n)/),b="",y=0;y<w.length;y++){var M="",k=w[y].replace(/^\n/,function(e){return M=e,""}),_=l(f.length);if(a=k.match(_),void 0!==a[1]){b.length&&(s(d,g,this.processInline(b),M),g=!1,b=""),a[1]=o(a[1]);var x=Math.floor(a[1].length/4)+1;if(x>f.length)p=i(a),d.push(p),d=p[1]=["listitem"];else{var I=!1;for(m=0;m<f.length;m++)if(f[m].indent==a[1]){p=f[m].list,f.splice(m+1,f.length-(m+1)),I=!0;break}I||(x++,x<=f.length?(f.splice(x,f.length-x),p=f[x-1].list):(p=i(a),d.push(p))),d=["listitem"],p.push(d)}M=""}k.length>a[0].length&&(b+=M+k.substr(a[0].length))}b.length&&(s(d,g,this.processInline(b),M),g=!1,b="");var q=u(f.length,t);q.length>0&&(h(f,c,this),d.push.apply(d,this.toTree(q,[])));var E=t[0]&&t[0].valueOf()||"";if(!E.match(n)&&!E.match(/^ /))break;e=t.shift();var $=this.dialect.block.horizRule(e,t);if($){v.push.apply(v,$);break}h(f,c,this),g=!0}return v}}(),blockquote:function(e,r){if(!e.match(/^>/m))return void 0;var t=[];if(">"!=e[0]){for(var n=e.split(/\n/),a=[],l=e.lineNumber;n.length&&">"!=n[0][0];)a.push(n.shift()),l++;var o=i(a.join("\n"),"\n",e.lineNumber);t.push.apply(t,this.processBlock(o,[])),e=i(n.join("\n"),e.trailing,l)}for(;r.length&&">"==r[0][0];){var s=r.shift();e=i(e+e.trailing+s,s.trailing,e.lineNumber)}var u=e.replace(/^> ?/gm,""),p=(this.tree,this.toTree(u,["blockquote"])),d=f(p);return d&&d.references&&(delete d.references,c(d)&&p.splice(1,1)),t.push(p),t},referenceDefn:function(e,r){var t=/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/;if(!e.match(t))return void 0;f(this.tree)||this.tree.splice(1,0,{});var n=f(this.tree);void 0===n.references&&(n.references={});var a=this.loop_re_over_block(t,e,function(e){e[2]&&"<"==e[2][0]&&">"==e[2][e[2].length-1]&&(e[2]=e[2].substring(1,e[2].length-1));var r=n.references[e[1].toLowerCase()]={href:e[2]};void 0!==e[4]?r.title=e[4]:void 0!==e[5]&&(r.title=e[5])});return a.length&&r.unshift(i(a,e.trailing)),[]},para:function(e){return[["para"].concat(this.processInline(e))]}}},r.dialects.Gruber.inline={__oneElement__:function(e,r,t){var n,a;r=r||this.dialect.inline.__patterns__;var l=new RegExp("([\\s\\S]*?)("+(r.source||r)+")");if(n=l.exec(e),!n)return[e.length,e];if(n[1])return[n[1].length,n[1]];var a;return n[2]in this.dialect.inline&&(a=this.dialect.inline[n[2]].call(this,e.substr(n.index),n,t||[])),a=a||[n[2].length,n[2]]},__call__:function(e,r){function a(e){"string"==typeof e&&"string"==typeof t[t.length-1]?t[t.length-1]+=e:t.push(e)}for(var n,t=[];e.length>0;)n=this.dialect.inline.__oneElement__.call(this,e,r,t),e=e.substr(n.shift()),h(n,a);return t},"]":function(){},"}":function(){},__escape__:/^\\[\\`\*_{}\[\]()#\+.!\-]/,"\\":function(e){return this.dialect.inline.__escape__.exec(e)?[2,e.charAt(1)]:[1,"\\"]},"![":function(e){var r=e.match(/^!\[(.*?)\][ \t]*\([ \t]*([^")]*?)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);if(r){r[2]&&"<"==r[2][0]&&">"==r[2][r[2].length-1]&&(r[2]=r[2].substring(1,r[2].length-1)),r[2]=this.dialect.inline.__call__.call(this,r[2],/\\/)[0];var t={alt:r[1],href:r[2]||""};return void 0!==r[4]&&(t.title=r[4]),[r[0].length,["img",t]]}return r=e.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/),r?[r[0].length,["img_ref",{alt:r[1],ref:r[2].toLowerCase(),original:r[0]}]]:[2,"!["]},"[":function C(e){var t=String(e),n=r.DialectHelpers.inline_until_char.call(this,e.substr(1),"]");if(!n)return[1,"["];var C,l,a=1+n[0],i=n[1];e=e.substr(a);var o=e.match(/^\s*\([ \t]*([^"']*)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);if(o){var s=o[1];if(a+=o[0].length,s&&"<"==s[0]&&">"==s[s.length-1]&&(s=s.substring(1,s.length-1)),!o[3])for(var u=1,h=0;h<s.length;h++)switch(s[h]){case"(":u++;break;case")":0==--u&&(a-=s.length-h,s=s.substring(0,h))}return s=this.dialect.inline.__call__.call(this,s,/\\/)[0],l={href:s||""},void 0!==o[3]&&(l.title=o[3]),C=["link",l].concat(i),[a,C]}return o=e.match(/^\s*\[(.*?)\]/),o?(a+=o[0].length,l={ref:(o[1]||String(i)).toLowerCase(),original:t.substr(0,a)},C=["link_ref",l].concat(i),[a,C]):1==i.length&&"string"==typeof i[0]?(l={ref:i[0].toLowerCase(),original:t.substr(0,a)},C=["link_ref",l,i[0]],[a,C]):[1,"["]},"<":function(e){var r;return null!=(r=e.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))?r[3]?[r[0].length,["link",{href:"mailto:"+r[3]},r[3]]]:"mailto"==r[2]?[r[0].length,["link",{href:r[1]},r[1].substr("mailto:".length)]]:[r[0].length,["link",{href:r[1]},r[1]]]:[1,"<"]},"`":function(e){var r=e.match(/(`+)(([\s\S]*?)\1)/);return r&&r[2]?[r[1].length+r[2].length,["inlinecode",r[3]]]:[1,"`"]},"  \n":function(){return[3,["linebreak"]]}},r.dialects.Gruber.inline["**"]=o("strong","**"),r.dialects.Gruber.inline.__=o("strong","__"),r.dialects.Gruber.inline["*"]=o("em","*"),r.dialects.Gruber.inline._=o("em","_"),r.buildBlockOrder=function(e){var r=[];for(var t in e)"__order__"!=t&&"__call__"!=t&&r.push(t);e.__order__=r},r.buildInlinePatterns=function(e){var r=[];for(var t in e)if(!t.match(/^__.*__$/)){var n=t.replace(/([\\.*+?|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");r.push(1==t.length?n:"(?:"+n+")")}r=r.join("|"),e.__patterns__=r;var a=e.__call__;e.__call__=function(e,t){return void 0!=t?a.call(this,e,t):a.call(this,e,r)}},r.DialectHelpers={},r.DialectHelpers.inline_until_char=function(e,r){for(var t=0,n=[];;){if(e.charAt(t)==r)return t++,[t,n];if(t>=e.length)return null;var a=this.dialect.inline.__oneElement__.call(this,e.substr(t));t+=a[0],n.push.apply(n,a.slice(1))}},r.subclassDialect=function(e){function r(){}function t(){}return r.prototype=e.block,t.prototype=e.inline,{block:new r,inline:new t}},r.buildBlockOrder(r.dialects.Gruber.block),r.buildInlinePatterns(r.dialects.Gruber.inline),r.dialects.Maruku=r.subclassDialect(r.dialects.Gruber),r.dialects.Maruku.processMetaHash=function(e){for(var r=s(e),t={},n=0;n<r.length;++n)if(/^#/.test(r[n]))t.id=r[n].substring(1);else if(/^\./.test(r[n]))t["class"]=t["class"]?t["class"]+r[n].replace(/./," "):r[n].substring(1);else if(/\=/.test(r[n])){var a=r[n].split(/\=/);t[a[0]]=a[1]}return t},r.dialects.Maruku.block.document_meta=function(e){if(e.lineNumber>1)return void 0;if(!e.match(/^(?:\w+:.*\n)*\w+:.*$/))return void 0;f(this.tree)||this.tree.splice(1,0,{});var t=e.split(/\n/);for(p in t){var n=t[p].match(/(\w+):\s*(.*)$/),a=n[1].toLowerCase(),i=n[2];this.tree[1][a]=i}return[]},r.dialects.Maruku.block.block_meta=function(e){var t=e.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(!t)return void 0;var i,n=this.dialect.processMetaHash(t[2]);if(""===t[1]){var l=this.tree[this.tree.length-1];if(i=f(l),"string"==typeof l)return void 0;i||(i={},l.splice(1,0,i));for(a in n)i[a]=n[a];return[]}var o=e.replace(/\n.*$/,""),s=this.processBlock(o,[]);i=f(s[0]),i||(i={},s[0].splice(1,0,i));for(a in n)i[a]=n[a];return s},r.dialects.Maruku.block.definition_list=function(e,r){var a,i,t=/^((?:[^\s:].*\n)+):\s+([\s\S]+)$/,n=["dl"];if(!(i=e.match(t)))return void 0;for(var l=[e];r.length&&t.exec(r[0]);)l.push(r.shift());for(var o=0;o<l.length;++o){var i=l[o].match(t),s=i[1].replace(/\n$/,"").split(/\n/),u=i[2].split(/\n:\s+/);for(a=0;a<s.length;++a)n.push(["dt",s[a]]);for(a=0;a<u.length;++a)n.push(["dd"].concat(this.processInline(u[a].replace(/(\n)\s+/,"$1"))))}return[n]},r.dialects.Maruku.block.table=function G(e){var i,l,t=function(e,r){r=r||"\\s",r.match(/^[\\|\[\]{}?*.+^$]$/)&&(r="\\"+r);for(var a,t=[],n=new RegExp("^((?:\\\\.|[^\\\\"+r+"])*)"+r+"(.*)");a=e.match(n);)t.push(a[1]),e=a[2];return t.push(e),t},n=/^ {0,3}\|(.+)\n {0,3}\|\s*([\-:]+[\-| :]*)\n((?:\s*\|.*(?:\n|$))*)(?=\n|$)/,a=/^ {0,3}(\S(?:\\.|[^\\|])*\|.*)\n {0,3}([\-:]+\s*\|[\-| :]*)\n((?:(?:\\.|[^\\|])*\|.*(?:\n|$))*)(?=\n|$)/;if(l=e.match(n))l[3]=l[3].replace(/^\s*\|/gm,"");else if(!(l=e.match(a)))return void 0;var G=["table",["thead",["tr"]],["tbody"]];l[2]=l[2].replace(/\|\s*$/,"").split("|");var o=[];for(h(l[2],function(e){o.push(e.match(/^\s*-+:\s*$/)?{align:"right"}:e.match(/^\s*:-+\s*$/)?{align:"left"}:e.match(/^\s*:-+:\s*$/)?{align:"center"}:{})}),l[1]=t(l[1].replace(/\|\s*$/,""),"|"),i=0;i<l[1].length;i++)G[1][1].push(["th",o[i]||{}].concat(this.processInline(l[1][i].trim())));return h(l[3].replace(/\|\s*$/gm,"").split("\n"),function(e){var r=["tr"];for(e=t(e,"|"),i=0;i<e.length;i++)r.push(["td",o[i]||{}].concat(this.processInline(e[i].trim())));G[2].push(r)},this),[G]},r.dialects.Maruku.inline["{:"]=function(e,r,t){if(!t.length)return[2,"{:"];var n=t[t.length-1];if("string"==typeof n)return[2,"{:"];var a=e.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);if(!a)return[2,"{:"];var i=this.dialect.processMetaHash(a[1]),l=f(n);l||(l={},n.splice(1,0,l));for(var o in i)l[o]=i[o];return[a[0].length,""]},r.dialects.Maruku.inline.__escape__=/^\\[\\`\*_{}\[\]()#\+.!\-|:]/,r.buildBlockOrder(r.dialects.Maruku.block),r.buildInlinePatterns(r.dialects.Maruku.inline);var h,u=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)};h=Array.prototype.forEach?function(e,r,t){return e.forEach(r,t)}:function(e,r,t){for(var n=0;n<e.length;n++)r.call(t||e,e[n],n,e)};var c=function(e){for(var r in e)if(hasOwnProperty.call(e,r))return!1;return!0};e.renderJsonML=function(e,r){r=r||{},r.root=r.root||!1;var t=[];if(r.root)t.push(g(e));else for(e.shift(),!e.length||"object"!=typeof e[0]||e[0]instanceof Array||e.shift();e.length;)t.push(g(e.shift()));return t.join("\n\n")}}(function(){return"undefined"==typeof exports?(window.markdown={},window.markdown):exports}());